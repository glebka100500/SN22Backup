<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>8ed97961c0a800270013b7ee1cc170f7</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
    &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
        &lt;access&gt;package_private&lt;/access&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;api_name&gt;global.CatalogTransactionRemove&lt;/api_name&gt;
        &lt;caller_access/&gt;
        &lt;client_callable&gt;false&lt;/client_callable&gt;
        &lt;description/&gt;
        &lt;name&gt;CatalogTransactionRemove&lt;/name&gt;
        &lt;script&gt;&lt;![CDATA[gs.include('PrototypeServer');
gs.include('AbstractTransaction');

var CatalogTransactionRemove = Class.create();

CatalogTransactionRemove.prototype =  Object.extendsObject(AbstractTransaction, {
	
	execute : function() {
		var cart;
		var cartName = this.request.getParameter("sysparm_cart_name");
		if (!JSUtil.nil(cartName))
			cart = GlideappCart.get(cartName);
		else
			cart = GlideappCart.get();
		var id = this.request.getParameter('sysparm_id');
		cart.remove(id);
		//for new order now, an entry was inserted in default cart, on deletion of the item from order now specific cart, that entry needs to be deleted from default cart as well
		var isNewOrderNow = '' + gs.getProperty("glide.sc.enable_order_now", "false");
		if(isNewOrderNow == 'true' &amp;&amp; !JSUtil.nil(cartName)) {
			var default_cart_item_id = gs.getSession().getProperty('default_cart_item');
			if (!JSUtil.nil(default_cart_item_id) &amp;&amp; cartName.startsWith('cart_')){
				cart = GlideappCart.get();
				cart.remove(default_cart_item_id);
				gs.getSession().clearProperty('default_cart_item');
			}
		}
			
		var url = this.request.getParameter("url");
		if (!GlideSecurityUtils.isURLWhiteListedStrict(url))
			url = GlideSecurityUtils.enforceRelativeURL(url);
		
		if (!JSUtil.nil(url))
			return url;
		else
			return gs.getSession().getStack().pop();
	}
});]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;glide.maint&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2008-09-23 10:55:29&lt;/sys_created_on&gt;
        &lt;sys_id&gt;8ed97961c0a800270013b7ee1cc170f7&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;32&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;CatalogTransactionRemove&lt;/sys_name&gt;
        &lt;sys_package display_value="Service Catalog Platform" source="com.glideapp.servicecatalog.platform"&gt;6d218d0f6d2620100acb70b35343303c&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_include_8ed97961c0a800270013b7ee1cc170f7&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2021-05-21 03:57:38&lt;/sys_updated_on&gt;
        &lt;u_script_length&gt;1333&lt;/u_script_length&gt;
    &lt;/sys_script_include&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-12-19 20:29:31</sys_created_on>
        <sys_id>790dc57e2f331110d8a4d5f62799b67b</sys_id>
        <sys_name>CatalogTransactionRemove</sys_name>
        <sys_package display_value="Integrations 2022" source="x_644088_integrati">4c7ca0582f0c9110d8a4d5f62799b66d</sys_package>
        <sys_policy/>
        <sys_scope display_value="Integrations 2022">4c7ca0582f0c9110d8a4d5f62799b66d</sys_scope>
        <sys_update_name>sys_metadata_link_790dc57e2f331110d8a4d5f62799b67b</sys_update_name>
        <tablename>sys_script_include</tablename>
    </sys_metadata_link>
</record_update>
