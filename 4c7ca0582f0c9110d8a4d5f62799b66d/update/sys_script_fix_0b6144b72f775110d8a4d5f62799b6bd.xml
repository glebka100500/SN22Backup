<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <before>false</before>
        <description/>
        <name>Rest Message with Retries</name>
        <record_for_rollback>true</record_for_rollback>
        <script><![CDATA[var provider = new sn_cc.ConnectionInfoProvider();
	var connectionInfo = provider.getConnectionInfo("d7db37212fdbd110d8a4d5f62799b6f0");
	var attributes = connectionInfo.getExtendedAttributes();

      try {
  var r = new sn_ws.RESTMessageV2('Jira Groups  Pull', 'Get Jira Groups');
		for (var attr in attributes){
			r.setStringParameterNoEscape(attr.replace('u_', ''), attributes[attr]);
		}
		function retryCallback(response, retries) {
			var backOffTime = Math.pow(2, retries);
			gs.log("Sleeping for " + backOffTime + " seconds");
			gs.sleep(backOffTime);
			gs.info("Attempt " + retries);
		}
		function retryCondition(response, retries){
			return response.getStatusCode() == 200;
		}
        var retryHandler = new x_644088_integrati.HTTPRetryHandler(retryCondition, retryCallback);
		var response = retryHandler.executeWithRetries(r);
        var httpStatus = response.getStatusCode();
		gs.info("Jira response body " + response.getBody());
		gs.info("Jira groups load status code " + httpStatus, "Jira Groups Load");
 
}catch (e){
if (e instanceof x_644088_integrati.OutOfHTTPRetriesError){
gs.log("OutOfHTTPRetriesError thrown and handled")
}
	else {
		throw e; // rethrow for visibility
	}
}]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-12-22 17:33:56</sys_created_on>
        <sys_id>0b6144b72f775110d8a4d5f62799b6bd</sys_id>
        <sys_name>Rest Message with Retries</sys_name>
        <sys_package display_value="Integrations 2022" source="x_644088_integrati">4c7ca0582f0c9110d8a4d5f62799b66d</sys_package>
        <sys_policy/>
        <sys_scope display_value="Integrations 2022">4c7ca0582f0c9110d8a4d5f62799b66d</sys_scope>
        <sys_update_name>sys_script_fix_0b6144b72f775110d8a4d5f62799b6bd</sys_update_name>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
