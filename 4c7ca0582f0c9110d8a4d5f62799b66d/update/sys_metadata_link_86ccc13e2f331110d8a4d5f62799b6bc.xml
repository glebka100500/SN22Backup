<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>71686a27c0a800687132ef26af7fd477</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
    &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
        &lt;access&gt;package_private&lt;/access&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;api_name&gt;global.AJAXClientTiming&lt;/api_name&gt;
        &lt;caller_access/&gt;
        &lt;client_callable&gt;true&lt;/client_callable&gt;
        &lt;description&gt;Save client timing values for a transaction&lt;/description&gt;
        &lt;name&gt;AJAXClientTiming&lt;/name&gt;
        &lt;script&gt;&lt;![CDATA[// This script include has been deprecated for the /now/ui/page_timing REST API.

    var AJAXClientTiming = Class.create();

AJAXClientTiming.prototype =  Object.extendsObject(AbstractAjaxProcessor, {

  process: function() {
     var transId = this.getParameter("transaction_id");
     var transTime = this.getParameter("transaction_time");
     var serverTime = this.getParameter("server_time");
     var networkTime = this.getParameter("network_time");
     if (networkTime == "")
        networkTime = "0";
     var browserTime = this.getParameter("browser_time");
     var detail_string = this.getParameter("client_details");
     var tableName = this.getParameter('table_name');
     var viewId = this.getParameter('view_id');
     var formName = this.getParameter('form_name');
	 
     this._postStats(networkTime, browserTime);
	  
     var gr = new GlideRecord("syslog_transaction");
	 if (!gr.get(transId)) {
		 gs.log("syslog_transaction not found for AjaxClientTiming: sysId: " + transId + ", table: " + tableName + ", view: " + viewId + ", form: " + formName);
		 return;
	 }
	  
	 gr.client_transaction = true;	  
     gr.client_response_time = transTime;
     gr.client_network_time = networkTime;
     gr.browser_time = browserTime;
     gr.client_script_time = this.getParameter("cs_time");
     gr.ui_policy_time = this.getParameter("policy_time");
     gr.table = tableName;
     gr.view_id = viewId;
	 if (gs.nil(gr.type)) {
         if ('sys_form_template' == formName)
             gr.type = 'form';
         else if (formName.indexOf('list_template') &gt;= 0)
            gr.type = 'list';
         else
            gr.type = 'other';
     }	  
     gr.updateLazy();
     // track statistics of the provided transaction log entry
     SNC.TransactionStatsScriptable.recordClientTransaction(transId, gr.client_response_time, gr.browser_time, gr.client_network_time, gr.client_script_time, gr.ui_policy_time, gr.origin_scope);

     var details = new JSON().decode(detail_string + '');
     for (i = 0; i &lt; details.length; i++) {
          var det = details[i];
          if (!det)
              continue;
              
          var grd = new GlideRecord("syslog_client_trans_det");
          grd.client_transaction = transId;
          grd.name = det.name;
          grd.duration = det.duration;
          grd.type = det.type_code;
          grd.order = i;
          grd.table = tableName;
          grd.insertLazy();
		  
		  if (det.sys_id) {
				SNC.ClientScriptStatsScriptable.recordClientScript(det.source_table, det.sys_id, det.script_detail, det.name, det.duration);
		  }
     }
  },

  _postStats: function(networkTime, browserTime) {
     try {
        var nt = parseInt(networkTime);
        var bt = parseInt(browserTime);
        GlideClientNetworkTimes.get().addSample(nt);
        GlideClientBrowserTimes.get().addSample(bt);
     } catch (e) {}
  },

  isPublic: function() {
    return false;
  },

  type: "AJAXClientTiming"
});]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;jay.berlin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2009-08-31 17:02:31&lt;/sys_created_on&gt;
        &lt;sys_id&gt;71686a27c0a800687132ef26af7fd477&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;66&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;AJAXClientTiming&lt;/sys_name&gt;
        &lt;sys_package display_value="Client Transaction Timings" source="com.glide.client_transaction"&gt;aba2810f6d6620100acb70b35343303a&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_include_71686a27c0a800687132ef26af7fd477&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;amy.mckinley&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2015-09-11 19:31:23&lt;/sys_updated_on&gt;
        &lt;u_script_length&gt;2968&lt;/u_script_length&gt;
    &lt;/sys_script_include&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-12-19 20:28:26</sys_created_on>
        <sys_id>86ccc13e2f331110d8a4d5f62799b6bc</sys_id>
        <sys_name>AJAXClientTiming</sys_name>
        <sys_package display_value="Integrations 2022" source="x_644088_integrati">4c7ca0582f0c9110d8a4d5f62799b66d</sys_package>
        <sys_policy/>
        <sys_scope display_value="Integrations 2022">4c7ca0582f0c9110d8a4d5f62799b66d</sys_scope>
        <sys_update_name>sys_metadata_link_86ccc13e2f331110d8a4d5f62799b6bc</sys_update_name>
        <tablename>sys_script_include</tablename>
    </sys_metadata_link>
</record_update>
